var eduCrudServices=angular.module("edu-crud.services",[]),eduCrudDirectives=angular.module("edu-crud.directives",[]),eduCrudFilters=angular.module("edu-crud.filters",[]),eduCrudTpl=angular.module("edu-crud.tpl",[]);angular.module("eduCrud",["edu-crud.services","edu-crud.directives","edu-crud.filters","edu-crud.tpl","ngResource","ui.bootstrap","eduForm","eduGrid"]),eduCrudServices.factory("dataFactoryCrud",["$resource",function(a){return function(b,c){var d={getAll:{method:"GET",params:{},withCredentials:!0,isArray:!0},getCount:{method:"GET",url:b+"/count",params:{},withCredentials:!0,isArray:!1},get:{method:"GET",params:{},withCredentials:!0,isArray:!1},insert:{method:"POST",params:{},withCredentials:!0,isArray:!1},update:{method:"PUT",params:{},withCredentials:!0,isArray:!1},remove:{method:"DELETE",params:{},withCredentials:!0,isArray:!1}};if("undefined"!=typeof c&&""!==c)for(keyAction in c)for(keyDefAction in d)keyAction==keyDefAction&&(d[keyDefAction]=c[keyAction]);return a(b,{},d)}}]),eduCrudDirectives.directive("eduCrud",function(){return{restrict:"A",replace:!0,transclude:!1,scope:{ngModel:"=",options:"="},templateUrl:"directives/edu-crud.tpl.html",link:function(a){if(!a.hasOwnProperty("options"))throw new Error("options are required!")},controller:["$scope","$log","dataFactoryCrud",function(a,b,c){if(!a.hasOwnProperty("options"))throw new Error("options are required!");if(a.options.heading="undefined"==typeof a.options.heading?"EduCrud":a.options.heading,a.options.showOverlayLoading="undefined"==typeof a.options.showOverlayLoading?!1:a.options.showOverlayLoading,a.options.showOvelayFormDelete="undefined"==typeof a.options.showOvelayFormDelete?!1:a.options.showOvelayFormDelete,a.options.showRefreshButton="undefined"==typeof a.options.showRefreshButton?!0:a.options.showRefreshButton,a.options.showAddButtonTopLeft="undefined"==typeof a.options.showAddButtonTopLeft?!0:a.options.showAddButtonTopLeft,a.options.showPagination="undefined"==typeof a.options.showPagination?!0:a.options.showPagination,a.options.showItemsPerPage="undefined"==typeof a.options.showItemsPerPage?!0:a.options.showItemsPerPage,a.options.showSearch="undefined"==typeof a.options.showSearch?!0:a.options.showSearch,a.options.showAvancedSearch="undefined"==typeof a.options.showAvancedSearch?!1:a.options.showAvancedSearch,a.options.showMetaData="undefined"==typeof a.options.showMetaData?!0:a.options.showMetaData,a.options.paginationWidth="undefined"==typeof a.options.paginationWidth?3:a.options.paginationWidth,a.options.showButtonsCrudEditPre="undefined"==typeof a.options.showButtonsCrudEditPre?!0:a.options.showButtonsCrudEditPre,a.options.showButtonsCrudDeletePre="undefined"==typeof a.options.showButtonsCrudDeletePre?!0:a.options.showButtonsCrudDeletePre,a.options.showButtonsCrudEditPost="undefined"==typeof a.options.showButtonsCrudEditPost?!1:a.options.showButtonsCrudEditPost,a.options.showButtonsCrudDeletePost="undefined"==typeof a.options.showButtonsCrudDeletePost?!1:a.options.showButtonsCrudDeletePost,a.options.showRowNumber="undefined"==typeof a.options.showRowNumber?!0:a.options.showRowNumber,a.options.showSelectRow="undefined"==typeof a.options.showSelectRow?!1:a.options.showSelectRow,"undefined"!=typeof a.options.metaData?a.options.metaData.limit="undefined"==typeof a.options.metaData.limit?5:a.options.metaData.limit:a.options.metaData={limit:5},a.options.hasOwnProperty("snippets")&&a.options.snippets.hasOwnProperty("buttonNew")&&(a.options.snippets.buttonAdd=a.options.snippets.buttonNew),a.options.crudControl={},a.showForm=!1,a.options.buttonsGridUserPre=[],a.options.buttonsGridUserPost=[],a.options.formData={},a.formFieldsError=!1,a.formOptionsError=!1,a.options.showButtonsGridUserPre=a.options.showButtonsCrudPre||a.options.showButtonsCrudEditPre||a.options.showButtonsCrudDeletePre||a.options.showButtonsUserPre,a.options.showButtonsGridUserPost=a.options.showButtonsCrudPost||a.options.showButtonsCrudEditPost||a.options.showButtonsCrudDeletePost||a.options.showButtonsUserPost,a.internalControl=a.options.crudControl||{},a.internalControl.refresh=function(){a.options.gridControl.refresh()},a.internalControl.showOverlayLoading=function(b){a.options.gridControl.showOverlayLoading(b)},a.internalControl.showOverlayFormDelete=function(b){a.options.showOverlayCrudFormDelete=b},a.internalControl.showOverlayFormUser=function(b){a.options.gridControl.showOverlayFormUser(b)},a.internalControl.clearForm=function(){a.options.formControl.clearForm()},a.internalControl.selectTab=function(b){a.options.formControl.selectTab(b)},a.internalControl.showButtonsUserPre=function(b){a.options.gridControl.showButtonsUserPre(b)},a.internalControl.showButtonsUserPost=function(b){a.options.gridControl.showButtonsUserPost(b)},a.internalControl.showButtonsCrudPre=function(b){console.log("showButtonsCrudPre"+b),a.options.showButtonsCrudEditPre=b,a.options.showButtonsCrudDeletePre=b},a.internalControl.showButtonsCrudPost=function(b){a.options.showButtonsCrudEditPost=b,a.options.showButtonsCrudDeletePost=b},a.internalControl.showButtonsCrudEditPre=function(b){console.log("showButtonsCrudPre"+b),a.options.showButtonsCrudEditPre=b},a.internalControl.showButtonsCrudEditPost=function(b){a.options.showButtonsCrudEditPost=b},a.internalControl.showButtonsCrudDeletePre=function(b){console.log("showButtonsCrudPre"+b),a.options.showButtonsCrudDeletePre=b},a.internalControl.showButtonsCrudDeletePost=function(b){a.options.showButtonsCrudDeletePost=b},a.options.hasOwnProperty("showButtonsCrudPre")&&(a.options.showButtonsCrudEditPre=a.options.showButtonsCrudPre,a.options.showButtonsCrudDeletePre=a.options.showButtonsCrudPre),a.options.hasOwnProperty("showButtonsCrudPost")&&(a.options.showButtonsCrudEditPost=a.options.showButtonsCrudPost,a.options.showButtonsCrudDeletePost=a.options.showButtonsCrudPost),a.options.hasOwnProperty("showAddButtonTopLeft")&&(a.options.showExtraButtonTopLeft=a.options.showAddButtonTopLeft),a.options.hasOwnProperty("showAddButtonTopRight")&&(a.options.showExtraButtonTopRight=a.options.showAddButtonTopRight),a.options.hasOwnProperty("snippets")&&a.options.snippets.hasOwnProperty("buttonAdd")&&(a.options.snippets.extraButtonTop=a.options.snippets.buttonAdd),a.options.listListeners.onExtraButtonClick=function(){console.log("click extra button:"),a.add()},a.options.showButtonsUserPre&&a.options.hasOwnProperty("buttonsUserPre"))for(var d=0;d<a.options.buttonsUserPre.length;d++)a.options.buttonsGridUserPre.push(a.options.buttonsUserPre[d]);if(a.options.showButtonsUserPost&&a.options.hasOwnProperty("buttonsUserPost"))for(var d=0;d<a.options.buttonsUserPost.length;d++)a.options.buttonsGridUserPost.push(a.options.buttonsUserPost[d]);a.options.showButtonsCrudEditPre&&a.options.buttonsGridUserPre.push({label:"Editar","class":"",glyphicon:"edit",button:!1,onclick:function(b){a.edit(b)}}),a.options.showButtonsCrudDeletePre&&a.options.buttonsGridUserPre.push({label:"Eliminar","class":"",glyphicon:"trash",button:!1,onclick:function(b){a.selectedRowForDelete=b,a.keyRowForDelete=a.options.fieldKeyLabel+": "+b[a.options.fieldKey]+"?",a.options.showOverlayCrudFormDelete=!0}}),a.options.showButtonsCrudEditPost&&a.options.buttonsGridUserPost.push({label:"Editar","class":"",glyphicon:"edit",button:!1,onclick:function(b){a.edit(b)}}),a.options.showButtonsCrudDeletePost&&a.options.buttonsGridUserPost.push({label:"Eliminar","class":"",glyphicon:"trash",button:!1,onclick:function(b){a.selectedRowForDelete=b,a.keyRowForDelete=a.options.fieldKeyLabel+": "+b[a.options.fieldKey]+"?",a.options.showOverlayCrudFormDelete=!0}}),a.options.buttonsUserPre=a.options.buttonsGridUserPre,a.options.buttonsUserPost=a.options.buttonsGridUserPost,a.options.showOverlayLoading=!1,a.startLoading=function(){a.options.gridControl.showOverlayLoading(!0)},a.finishLoading=function(){a.options.gridControl.showOverlayLoading(!1)},a.api=null,"undefined"!=typeof a.options.crudUri&&""!==a.options.crudUri&&(a.api=c(a.options.crudUri,"undefined"!=typeof a.options.actions?a.options.actions:"")),a.options.formListeners={onsave:function(b){console.log("grid form onsave()"+angular.toJson(b)),a.save(b)},oncancel:function(){console.log("grid form oncancel()"),a.cancel()}},a.cancel=function(){b.log("click cancel"),a.mode="list",a.showForm=!1},a.edit=function(b){console.log("Edit row:",b);var c=b[a.options.fieldKey],d={};d.id=c,a.api.get(d,function(b){a.options.formData=b,a.options.formFields.tabs[0].active=!0}),a.mode="edit",a.showForm=!0},a.save=function(c){if("edit"==a.mode){var d=c[a.options.fieldKey],e={};e.id=d,a.api.update(e,c,function(){a.options.gridControl.refresh()})}else"new"==a.mode&&(b.log("click save row:"+angular.toJson(c)),a.api.insert(c,function(){a.options.gridControl.refresh()}));a.mode="list",a.showForm=!1},a.remove=function(b){var c=b[a.options.fieldKey],d={};d.id=c,a.api.remove(d,function(){a.options.gridControl.refresh()})},a.add=function(){b.log("click new"),a.mode="new",a.options.formControl.selectTab(0),a.showForm=!0;for(key in a.options.formData)a.options.formData[key]=""},a.formDeleteContinue=function(){a.remove(a.selectedRowForDelete),a.options.showOverlayCrudFormDelete=!1},a.formDeleteCancel=function(){a.options.showOverlayCrudFormDelete=!1}}]}}),angular.module("edu-crud.tpl").run(["$templateCache",function(a){"use strict";a.put("directives/edu-crud.tpl.html",'<div><div ng-if=!options><h4>Options are required</h4></div><div class=box ng-if=options><div ng-hide=showForm><div class=panel-body><div edu-grid options=options></div></div></div><div ng-show=showForm><div class=panel-body><div><div edu-form result=options.formData options=options></div></div></div></div><div name=overlay class="dw-loading dw-loading-overlay dw-loading-active" ng-show=options.showOverlayCrudFormDelete><div class=dw-loading-body><div class=dw-loading-spinner><div class="panel panel-default"><div class=panel-heading><div class=row><div class=col-md-12><h4>{{options.snippets.formDeleteTitle || \'Por favor confirme\'}}</h4></div></div></div><div class=panel-body><h4>{{options.snippets.formDeleteMessage || \'¿Está seguro que quiere ELIMINAR el registro\'}} {{keyRowForDelete}}</h4></div><div class=panel-footer><div class=row><div class="col-md-offset-6 col-md-6"><button ng-click=formDeleteContinue() class="btn btn-sm btn-primary">{{options.snippets.formDeleteButtonContinue || \'Continuar\'}}</button> <button ng-click=formDeleteCancel() class="btn btn-sm">{{options.snippets.formDeleteButtonCancel || \'Cancelar\'}}</button></div></div></div></div></div></div></div></div></div>')}]);
//# sourceMappingURL=edu-crud.min.map